{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Muhammad Sholahuddin\\\\Documents\\\\kokok\\\\MERN\\\\mern-blog\\\\src\\\\pages\\\\CreateBlog\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, Gap, Input, Link, TextArea, Upload } from '../../components';\nimport './createblog.scss';\nimport { useHistory, withRouter } from 'react-router-dom';\nimport Axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { postToAPI, setForm, setImgPreview, updateToAPI } from '../../config/redux/action';\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\nimport 'sweetalert2/src/sweetalert2.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreateBlog = props => {\n  _s();\n\n  const {\n    form,\n    imgPreview\n  } = useSelector(state => state.createBlogReducer); //dgn State yg spesifik\n\n  const {\n    title,\n    body\n  } = form;\n  const [isUpdate, setIsUpdate] = useState(false);\n  const dispatch = useDispatch(); //const [title, setTitle] = useState('');\n  //const [body, setBody] = useState('');\n  //const [image, setImage] = useState('');\n  //const [imagePreview, setImagePreview] = useState(null);\n\n  const history = useHistory();\n  useEffect(() => {\n    console.log('params: ', props);\n    const id = props.match.params.id;\n\n    if (id) {\n      setIsUpdate(true);\n      Axios.get(`http://192.168.1.5:4000/v1/blog/get/${id}`).then(res => {\n        const data = res.data.data;\n        console.log('res: ', data);\n        dispatch(setForm('title', data.title));\n        dispatch(setForm('body', data.body));\n        dispatch(setImgPreview(`http://192.168.100.30:4000/${data.image}`));\n      }).catch(err => {\n        console.log('err: ', err);\n      });\n    }\n  }, [props]);\n\n  const onSubmit = () => {\n    //console.log('title: ', title)\n    //console.log('body: ', body)\n    Swal.fire({\n      icon: 'success',\n      title: 'Success',\n      text: 'Success Post Blog!!!',\n      footer: '<a href=\"//192.168.1.5:3000\">Go Home!!!</a>'\n    }); //console.log('image: ', image)\n\n    const id = props.match.params.id;\n\n    if (isUpdate) {\n      console.log('update data');\n      updateToAPI(form, id);\n    } else {\n      console.log('create data');\n      postToAPI(form);\n    }\n  };\n\n  const onImageUpload = e => {\n    const file = e.target.files[0];\n    dispatch(setForm('image', file));\n    dispatch(setImgPreview(URL.createObjectURL(file)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"blog-post\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      title: \"Kembali\",\n      onClick: () => history.push('/')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"title\",\n      children: [isUpdate ? 'Update' : 'Create New', \" Blog Post\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      label: \"Post Title\",\n      value: title,\n      onChange: e => dispatch(setForm('title', e.target.value))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Upload, {\n      onChange: e => onImageUpload(e),\n      img: imgPreview\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n      value: body,\n      onChange: e => dispatch(setForm('body', e.target.value))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Gap, {\n      height: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-action\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        tittle: isUpdate ? 'Update' : 'Simpan',\n        onClick: onSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CreateBlog, \"56v+qcG8MjTeTJRP0VFgcCUdXok=\", false, function () {\n  return [useSelector, useDispatch, useHistory];\n});\n\n_c = CreateBlog;\nexport default _c2 = withRouter(CreateBlog);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CreateBlog\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/Muhammad Sholahuddin/Documents/kokok/MERN/mern-blog/src/pages/CreateBlog/index.js"],"names":["React","useEffect","useState","Button","Gap","Input","Link","TextArea","Upload","useHistory","withRouter","Axios","useSelector","useDispatch","postToAPI","setForm","setImgPreview","updateToAPI","Swal","CreateBlog","props","form","imgPreview","state","createBlogReducer","title","body","isUpdate","setIsUpdate","dispatch","history","console","log","id","match","params","get","then","res","data","image","catch","err","onSubmit","fire","icon","text","footer","onImageUpload","e","file","target","files","URL","createObjectURL","push","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Button, Gap, Input, Link, TextArea, Upload } from '../../components'\r\nimport './createblog.scss'\r\nimport {useHistory, withRouter} from 'react-router-dom';\r\nimport Axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { postToAPI, setForm, setImgPreview, updateToAPI } from '../../config/redux/action';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\nimport 'sweetalert2/src/sweetalert2.scss';\r\n\r\nconst CreateBlog = (props) => {\r\n    const {form, imgPreview} = useSelector(state => state.createBlogReducer); //dgn State yg spesifik\r\n    const {title, body} = form;\r\n    const [isUpdate, setIsUpdate] = useState(false);\r\n    const dispatch = useDispatch();\r\n    \r\n    //const [title, setTitle] = useState('');\r\n    //const [body, setBody] = useState('');\r\n    //const [image, setImage] = useState('');\r\n    //const [imagePreview, setImagePreview] = useState(null);\r\n    const history= useHistory();\r\n\r\n    useEffect(()=> {\r\n        console.log('params: ', props)\r\n        const id = props.match.params.id \r\n        if(id){\r\n            setIsUpdate(true);\r\n            Axios.get(`http://192.168.1.5:4000/v1/blog/get/${id}`)\r\n            .then(res => {\r\n                const data =  res.data.data;\r\n                console.log('res: ', data)\r\n                dispatch(setForm('title', data.title));\r\n                dispatch(setForm('body', data.body));\r\n                dispatch(setImgPreview(`http://192.168.100.30:4000/${data.image}`));\r\n            })\r\n            .catch(err => {\r\n                console.log('err: ', err)\r\n            })\r\n        }\r\n    },[props])\r\n\r\n    const onSubmit = () => {\r\n        //console.log('title: ', title)\r\n        //console.log('body: ', body)\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Success',\r\n            text: 'Success Post Blog!!!',\r\n            footer: '<a href=\"//192.168.1.5:3000\">Go Home!!!</a>'\r\n          }) \r\n        //console.log('image: ', image)\r\n        const id = props.match.params.id\r\n        if(isUpdate) {\r\n            console.log('update data')\r\n            updateToAPI(form, id)\r\n        } else {\r\n            console.log('create data')\r\n            postToAPI(form)    \r\n        }\r\n    }\r\n\r\n    \r\n\r\n    const onImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        dispatch(setForm('image', file));\r\n        dispatch(setImgPreview(URL.createObjectURL(file)));\r\n    }\r\n    return (\r\n        <div className=\"blog-post\">\r\n            <Link title=\"Kembali\" onClick={() => history.push('/')} />\r\n            <p className=\"title\">{isUpdate ? 'Update' : 'Create New'} Blog Post</p>\r\n            <Input label=\"Post Title\" value={title} onChange={(e) => dispatch(setForm('title', e.target.value))} />\r\n            <Upload onChange={(e) => onImageUpload(e)} img={imgPreview} />\r\n            <TextArea value={body} onChange={(e) => dispatch(setForm('body', e.target.value))} />\r\n            <Gap height={20} />\r\n            <div className=\"button-action\">\r\n                <Button tittle={isUpdate ? 'Update' : 'Simpan'} onClick={onSubmit} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(CreateBlog)"]},"metadata":{},"sourceType":"module"}